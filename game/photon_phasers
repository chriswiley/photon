
# $Log: photon_phasers,v $
# Revision 1.1  1999/02/06 20:24:36  game
# Initial revision
#
#

namespace eval Photon_ps {
  if { [ info exists ::Conf::phasertty ] } {
    set fd [ open $::Conf::phasertty "w" ]
    set phaseron 0
    set outstring [ format "%c" [ expr $::Photon::GSYNC ] ]
    fconfigure $fd -blocking 0 -buffering none -translation binary
    menu .menubar.photonps -tearoff 0
    ::.menubar add cascade -label PhotonPS -menu .menubar.photonps
    .menubar.photonps add check -label ON -variable ::Photon_ps::phaseron -offvalue 0 -onvalue 1
  } else {
    set phaseron -1
  }
  after 1000 ::Photon_ps::phasersync
  proc phasersync { } {
  if { [ info exists ::Conf::phasertty ] } {
    variable phaseron   
    variable fd 
    variable outstring
    if { $phaseron == 1 } {
      puts -nonewline $fd $outstring
    }
    after 1000 ::Photon_ps::phasersync
    }
  }
}


